(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?module.exports=e():typeof define==="function"&&define.amd?define("vue/validator",e):t.VueValidator=e()})(this,function(){"use strict";var t={};t.typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol?"symbol":typeof t};t.classCallCheck=function(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}};t.createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(t,n.key,n)}}return function(e,i,n){if(i)t(e.prototype,i);if(n)t(e,n);return e}}();t.inherits=function(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e};t.possibleConstructorReturn=function(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t};t;var e={};function i(t,e){if(window.console){console.warn("[vue-validator] "+t);if(e){console.warn(e.stack)}}}function n(t){if(t===null||t===undefined){return true}if(Array.isArray(t)){if(t.length>0){return false}if(t.length===0){return true}}else if(e.Vue.util.isPlainObject(t)){for(var i in t){if(e.Vue.util.hasOwn(t,i)){return false}}}return true}function a(t,i,n){if(Array.isArray(t)){for(var a=0;a<t.length;a++){i.call(n||t[a],t[a],a)}}else if(e.Vue.util.isPlainObject(t)){var r=e.Vue.util.hasOwn;for(var o in t){if(r(t,o)){i.call(n||t[o],t[o],o)}}}}function r(t,i){var n=e.Vue.util.indexOf(t,i);return~n?t.splice(n,1):null}function o(t,e,i){var n=document.createEvent("HTMLEvents");n.initEvent(e,true,false);if(i){for(var a in i){n[a]=i[a]}}try{t.dispatchEvent(n)}catch(n){}}function s(t){return t&&typeof t.then==="function"}function l(e){if(Array.isArray(e)){if(e.length!==0){var i=true;for(var n=0,a=e.length;n<a;n++){i=l(e[n]);if(!i){break}}return i}else{return false}}else if(typeof e==="number"||typeof e==="function"){return true}else if(typeof e==="boolean"){return e}else if(typeof e==="string"){return e.length>0}else if(e!==null&&(typeof e==="undefined"?"undefined":t.typeof(e))==="object"){return Object.keys(e).length>0}else if(e===null||e===undefined){return false}}function d(t,e){if(typeof e!=="string"){return false}var i=e.match(new RegExp("^/(.*?)/([gimy]*)$"));if(!i){return false}return new RegExp(i[1],i[2]).test(t)}function u(t,e){if(typeof t==="string"){return v(e,10)&&t.length>=parseInt(e,10)}else if(Array.isArray(t)){return t.length>=parseInt(e,10)}else{return false}}function f(t,e){if(typeof t==="string"){return v(e,10)&&t.length<=parseInt(e,10)}else if(Array.isArray(t)){return t.length<=parseInt(e,10)}else{return false}}function h(t,e){return!isNaN(+t)&&!isNaN(+e)&&+t>=+e}function c(t,e){return!isNaN(+t)&&!isNaN(+e)&&+t<=+e}function v(t){return/^(-?[1-9]\d*|0)$/.test(t)}var p=Object.freeze({required:l,pattern:d,minlength:u,maxlength:f,min:h,max:c});function _(t){var e=t.util.extend;var i=Object.create(null);e(i,p);t.options.validators=i;var n=t.config.optionMergeStrategies;if(n){n.validators=function(t,i){if(!i){return t}if(!t){return i}var n=Object.create(null);e(n,t);for(var a in i){n[a]=i[a]}return n}}t.validator=function(e,i){if(!i){return t.options["validators"][e]}else{t.options["validators"][e]=i}}}function g(t){var e=t.prototype._init;t.prototype._init=function(t){if(!this._validatorMaps){this._validatorMaps=Object.create(null)}e.call(this,t)};var i=t.prototype._destroy;t.prototype._destroy=function(){i.apply(this,arguments);this._validatorMaps=null}}function m(t){var e=t.util;var n=t.directive("if");var r=t.FragmentFactory;var o=t.parsers.directive.parseDirective;var s=/[^|]\|[^|]/;function l(){if(e.inBrowser){var t=document.createElement("textarea");t.placeholder="t";return t.cloneNode(true).value==="t"}else{return false}}var d=l();t.directive("validate",{terminal:true,priority:n.priority+16,params:["group","field","detect-blur","detect-change","initial"],paramWatchers:{detectBlur:function u(t,e){if(this._invalid){return}this.validation.detectBlur=this.isDetectBlur(t);this.validator.validate(this.field)},detectChange:function f(t,e){if(this._invalid){return}this.validation.detectChange=this.isDetectChange(t);this.validator.validate(this.field)}},bind:function h(){var t=this.el;if("development"!=="production"&&t.__vue__){i('v-validate="'+this.expression+'" cannot be '+"used on an instance root element.");this._invalid=true;return}if("development"!=="production"&&(t.hasAttribute("v-if")||t.hasAttribute("v-for"))){i("v-validate cannot be used `v-if` or `v-for` build-in terminal directive "+"on an element. these is wrapped with `<template>` or other tags: "+'(e.g. <validator name="validator">'+'<template v-if="hidden">'+'<input type="text" v-validate:field1="[\'required\']">'+"</template>"+"</validator>).");this._invalid=true;return}var e=this.vm.$options._validator;if("development"!=="production"&&!e){i("v-validate need to use into validator element directive: "+'(e.g. <validator name="validator">'+'<input type="text" v-validate:field1="[\'required\']">'+"</validator>).");this._invalid=true;return}var n=t.getAttribute("v-model");var a=this.parseModelRaw(n);var r=a.model;var o=a.filters;this.model=r;this.setupFragment();this.setupValidate(e,r,o);this.listen()},update:function c(t,i){if(!t||this._invalid){return}if(e.isPlainObject(t)){this.handleObject(t)}else if(Array.isArray(t)){this.handleArray(t)}this.validator.validate({field:this.field,noopable:this._initialNoopValidation});if(this._initialNoopValidation){this._initialNoopValidation=null}},unbind:function v(){if(this._invalid){return}this.unlisten();this.teardownValidate();this.teardownFragment();this.model=null},parseModelRaw:function p(t){if(s.test(t)){var e=o(t);return{model:e.expression,filters:e.filters}}else{return{model:t}}},setupValidate:function _(t,i,n){var a=this.params;var r=this.validator=this.vm._validatorMaps[t];this.field=e.camelize(this.arg?this.arg:a.field);this.validation=r.manageValidation(this.field,i,this.vm,this.frag.node,this._scope,n,this.isDetectBlur(a.detectBlur),this.isDetectChange(a.detectChange));a.group&&r.addGroupValidation(a.group,this.field);this._initialNoopValidation=this.isInitialNoopValidation(a.initial)},listen:function g(){var t=this.model;var i=this.validation;var n=this.frag.node;this.onBlur=e.bind(i.listener,i);e.on(n,"blur",this.onBlur);if((n.type==="radio"||n.tagName==="SELECT")&&!t){this.onChange=e.bind(i.listener,i);e.on(n,"change",this.onChange)}else if(n.type==="checkbox"){if(!t){this.onChange=e.bind(i.listener,i);e.on(n,"change",this.onChange)}else{this.onClick=e.bind(i.listener,i);e.on(n,"click",this.onClick)}}else{if(!t){this.onInput=e.bind(i.listener,i);e.on(n,"input",this.onInput)}}},unlisten:function m(){var t=this.frag.node;if(this.onInput){e.off(t,"input",this.onInput);this.onInput=null}if(this.onClick){e.off(t,"click",this.onClick);this.onClick=null}if(this.onChange){e.off(t,"change",this.onChange);this.onChange=null}if(this.onBlur){e.off(t,"blur",this.onBlur);this.onBlur=null}},teardownValidate:function y(){if(this.validator&&this.validation){var t=this.frag.node;this.params.group&&this.validator.removeGroupValidation(this.params.group,this.field);this.validator.unmanageValidation(this.field,t);this.validator=null;this.validation=null;this.field=null}},setupFragment:function V(){this.anchor=e.createAnchor("v-validate");e.replace(this.el,this.anchor);this.factory=new r(this.vm,this.shimNode(this.el));this.frag=this.factory.create(this._host,this._scope,this._frag);this.frag.before(this.anchor)},teardownFragment:function b(){if(this.frag){this.frag.remove();this.frag=null;this.factory=null}e.replace(this.anchor,this.el);this.anchor=null},handleArray:function w(t){var e=this;a(t,function(t){e.validation.setValidation(t)})},handleObject:function k(t){var i=this;a(t,function(t,n){if(e.isPlainObject(t)){if("rule"in t){var a="message"in t?t.message:null;var r="initial"in t?t.initial:null;i.validation.setValidation(n,t.rule,a,r)}}else{i.validation.setValidation(n,t)}})},isDetectBlur:function E(t){return t===undefined||t==="on"||t===true},isDetectChange:function C(t){return t===undefined||t==="on"||t===true},isInitialNoopValidation:function x(t){return t==="off"||t===false},shimNode:function N(t){var e=t;if(d){if(t.tagName==="TEXTAREA"){e=t.cloneNode(true);e.value=t.value;var i=e.childNodes.length;while(i--){e.removeChild(e.childNodes[i])}}}return e}})}var y=function(){function i(e,n,a,r,o,s,l,d,u){t.classCallCheck(this,i);this.field=e;this.touched=false;this.dirty=false;this.modified=false;this._modified=false;this._model=n;this._filters=l;this._validator=s;this._vm=a;this._el=r;this._forScope=o;this._init=this._getValue(r);this._validators={};this._detectBlur=d;this._detectChange=u}i.prototype.manageElement=function r(t){var e=this;var i=this._getScope();var n=this._model;if(n){t.value=this._evalModel(n,this._filters)||"";this._unwatch=i.$watch(n,function(i,n){if(i!==n){if(e.guardValidate(t,"input")){return}e.handleValidate(t)}},{deep:true})}};i.prototype.unmanageElement=function l(t){this._unwatch&&this._unwatch()};i.prototype.setValidation=function d(t,e,i,n){var a=this._validators[t];if(!a){a=this._validators[t]={};a.name=t}a.arg=e;if(i){a.msg=i}if(n){a.initial=n;a._isNoopable=true}};i.prototype.willUpdateFlags=function u(){var t=arguments.length<=0||arguments[0]===undefined?false:arguments[0];t&&this.willUpdateTouched(this._el,"blur");this.willUpdateDirty(this._el);this.willUpdateModified(this._el)};i.prototype.willUpdateTouched=function f(t,e){if(e&&e==="blur"){this.touched=true;this._fireEvent(t,"touched")}};i.prototype.willUpdateDirty=function h(t){if(!this.dirty&&this._checkModified(t)){this.dirty=true;this._fireEvent(t,"dirty")}};i.prototype.willUpdateModified=function c(t){this.modified=this._checkModified(t);if(this._modified!==this.modified){this._fireEvent(t,"modified",{modified:this.modified});this._modified=this.modified}};i.prototype.listener=function v(t){if(this.guardValidate(t.target,t.type)){return}this.handleValidate(t.target,t.type)};i.prototype.handleValidate=function p(t,e){this.willUpdateTouched(t,e);this.willUpdateDirty(t);this.willUpdateModified(t);this._validator.validate({field:this.field})};i.prototype.validate=function _(t){var i=this;var a=arguments.length<=1||arguments[1]===undefined?false:arguments[1];var r=e.Vue.util;var o={};var s=[];var l=true;this._runValidators(function(t,e,n){var d=i._resolveValidator(e);var u=null;var f=null;if(r.isPlainObject(d)){if(d.check&&typeof d.check==="function"){u=d.check}if(d.message){f=d.message}}else if(typeof d==="function"){u=d}if(t.msg){f=t.msg}if(a){o[e]=false;return n()}if(t._isNoopable){o[e]=false;t._isNoopable=null;return n()}if(u){var h=i._getValue(i._el);i._invokeValidator(i._vm,u,h,t.arg,function(a,r){if(!a){l=false;if(r){s.push({validator:e,message:r});o[e]=r}else if(f){var d={validator:e};d.message=typeof f==="function"?f.call(i._vm,i.field,t.arg):f;s.push(d);o[e]=d.message}else{o[e]=!a}}else{o[e]=!a}n()})}else{n()}},function(){i._fireEvent(i._el,l?"valid":"invalid");var e={valid:l,invalid:!l,touched:i.touched,untouched:!i.touched,dirty:i.dirty,pristine:!i.dirty,modified:i.modified};if(!n(s)){e.errors=s}r.extend(o,e);t(o)})};i.prototype.resetFlags=function g(){this.touched=false;this.dirty=false;this.modified=false;this._modified=false};i.prototype.reset=function m(){a(this._validators,function(t,e){if(t.initial&&!t._isNoopable){t._isNoopable=true}});this.resetFlags();this._init=this._getValue(this._el)};i.prototype.guardValidate=function y(t,e){if(e&&e==="blur"&&!this.detectBlur){return true}if(e&&e==="input"&&!this.detectChange){return true}if(e&&e==="change"&&!this.detectChange){return true}if(e&&e==="click"&&!this.detectChange){return true}return false};i.prototype._getValue=function V(t){return t.value};i.prototype._getScope=function b(){return this._forScope||this._vm};i.prototype._checkModified=function w(t){return this._init!==this._getValue(t)};i.prototype._fireEvent=function k(t,e,i){o(t,e,i)};i.prototype._evalModel=function E(t,e){var i=this._getScope();if(e){var n=i.$get(t);return e?this._applyFilters(n,null,e):n}else{return i.$get(t)}};i.prototype._applyFilters=function C(t,i,n,a){var r=e.Vue.util.resolveAsset;var o=this._getScope();var s=void 0,l=void 0,d=void 0,u=void 0,f=void 0,h=void 0,c=void 0,v=void 0,p=void 0;for(h=0,c=n.length;h<c;h++){s=n[h];l=r(this._vm.$options,"filters",s.name);if(!l){continue}l=a?l.write:l.read||l;if(typeof l!=="function"){continue}d=a?[t,i]:[t];f=a?2:1;if(s.args){for(v=0,p=s.args.length;v<p;v++){u=s.args[v];d[v+f]=u.dynamic?o.$get(u.value):u.value}}t=l.apply(this._vm,d)}return t};i.prototype._runValidators=function x(t,e){var i=this._validators;var n=Object.keys(i).length;var r=0;a(i,function(i,a){t(i,a,function(){++r;r>=n&&e()})})};i.prototype._invokeValidator=function N(t,e,i,n,a){var r=e.call(this,i,n);if(typeof r==="function"){if(r.resolved){a(r.resolved)}else if(r.requested){r.pendingCallbacks.push(a)}else{(function(){r.requested=true;var t=r.pendingCallbacks=[a];r(function(){r.resolved=true;for(var e=0,i=t.length;e<i;e++){t[e](true)}},function(t){a(false,t)})})()}}else if(s(r)){r.then(function(){a(true)},function(t){a(false,t)}).catch(function(t){a(false,t.message)})}else{a(r)}};i.prototype._resolveValidator=function S(t){var i=e.Vue.util.resolveAsset;return i(this._vm.$options,"validators",t)};t.createClass(i,[{key:"vm",get:function A(){return this._vm}},{key:"el",get:function O(){return this._el}},{key:"detectChange",get:function j(){return this._detectChange},set:function M(t){this._detectChange=t}},{key:"detectBlur",get:function F(){return this._detectBlur},set:function $(t){this._detectBlur=t}}]);return i}();var V=function(e){t.inherits(i,e);function i(n,a,r,o,s,l,d,u,f){t.classCallCheck(this,i);var h=t.possibleConstructorReturn(this,e.call(this,n,a,r,o,s,l,d,u,f));h._inits=[];return h}i.prototype.manageElement=function n(t){var e=this;var i=this._getScope();var n=this._addItem(t);var a=n.model=this._model;if(a){var r=this._evalModel(a,this._filters);if(Array.isArray(r)){this._setChecked(r,n.el);n.unwatch=i.$watch(a,function(t,i){if(t!==i){if(e.guardValidate(n.el,"change")){return}e.handleValidate(n.el)}})}else{t.checked=r||false;this._init=t.checked;n.init=t.checked;n.value=t.value;n.unwatch=i.$watch(a,function(i,n){if(i!==n){if(e.guardValidate(t,"change")){return}e.handleValidate(t)}})}}else{this._validator.validate({field:this.field})}};i.prototype.unmanageElement=function r(t){var e=-1;a(this._inits,function(i,n){if(i.el===t){e=n;if(i.unwatch&&i.model){i.unwatch();i.unwatch=null;i.model=null}}});if(e===-1){return}this._inits.splice(e,1);this._validator.validate({field:this.field})};i.prototype.willUpdateFlags=function o(){var t=this;a(this._inits,function(e,i){t.willUpdateDirty(e.el);t.willUpdateModified(e.el)})};i.prototype.reset=function s(){this.resetFlags();a(this._inits,function(t,e){t.init=t.el.checked;t.value=t.el.value})};i.prototype._addItem=function l(t){var e={el:t,init:t.checked,value:t.value};this._inits.push(e);return e};i.prototype._setChecked=function d(t,e){for(var i=0,n=t.length;i<n;i++){var a=t[i];if(!e.disabled&&e.value===a&&!e.checked){e.checked=true}}};i.prototype._getValue=function u(e){var i=this;if(!this._inits||this._inits.length===0){return e.checked}else{var n=function(){var t=[];a(i._inits,function(e,i){e.el.checked&&t.push(e.el.value)});return{v:t}}();if((typeof n==="undefined"?"undefined":t.typeof(n))==="object")return n.v}};i.prototype._checkModified=function f(e){var i=this;if(this._inits.length===0){return this._init!==e.checked}else{var n=function(){var t=false;a(i._inits,function(e,i){if(!t){t=e.init!==e.el.checked}});return{v:t}}();if((typeof n==="undefined"?"undefined":t.typeof(n))==="object")return n.v}};return i}(y);var b=function(e){t.inherits(i,e);function i(n,a,r,o,s,l,d,u,f){t.classCallCheck(this,i);var h=t.possibleConstructorReturn(this,e.call(this,n,a,r,o,s,l,d,u,f));h._inits=[];return h}i.prototype.manageElement=function n(t){var e=this;var i=this._getScope();var n=this._addItem(t);var a=n.model=this._model;if(a){var r=this._evalModel(a,this._filters);this._setChecked(r,t,n);n.unwatch=i.$watch(a,function(i,a){if(i!==a){if(e.guardValidate(n.el,"change")){return}e.handleValidate(t)}})}else{this._validator.validate({field:this.field})}};i.prototype.unmanageElement=function r(t){var e=-1;a(this._inits,function(i,n){if(i.el===t){e=n}});if(e===-1){return}this._inits.splice(e,1);this._validator.validate({field:this.field})};i.prototype.willUpdateFlags=function o(){var t=this;a(this._inits,function(e,i){t.willUpdateDirty(e.el);t.willUpdateModified(e.el)})};i.prototype.reset=function s(){this.resetFlags();a(this._inits,function(t,e){t.init=t.el.checked;t.value=t.el.value})};i.prototype._addItem=function l(t){var e={el:t,init:t.checked,value:t.value};this._inits.push(e);return e};i.prototype._setChecked=function d(t,e,i){if(e.value===t){e.checked=true;this._init=e.checked;i.init=e.checked;i.value=t}};i.prototype._getValue=function u(e){var i=this;if(!this._inits||this._inits.length===0){return e.checked}else{var n=function(){var t=[];a(i._inits,function(e,i){e.el.checked&&t.push(e.el.value)});return{v:t}}();if((typeof n==="undefined"?"undefined":t.typeof(n))==="object")return n.v}};i.prototype._checkModified=function f(e){var i=this;if(this._inits.length===0){return this._init!==e.checked}else{var n=function(){var t=false;a(i._inits,function(e,i){if(!t){t=e.init!==e.el.checked}});return{v:t}}();if((typeof n==="undefined"?"undefined":t.typeof(n))==="object")return n.v}};return i}(y);var w=function(e){t.inherits(i,e);function i(n,a,r,o,s,l,d,u,f){t.classCallCheck(this,i);var h=t.possibleConstructorReturn(this,e.call(this,n,a,r,o,s,l,d,u,f));h._multiple=h._el.hasAttribute("multiple");return h}i.prototype.manageElement=function n(t){var e=this;var i=this._getScope();var n=this._model;if(n){var a=this._evalModel(n,this._filters);var r=!Array.isArray(a)?[a]:a;this._setOption(r,t);this._unwatch=i.$watch(n,function(i,n){var a=!Array.isArray(i)?[i]:i;var r=!Array.isArray(n)?[n]:n;if(a.slice().sort().toString()!==r.slice().sort().toString()){if(e.guardValidate(t,"change")){return}e.handleValidate(t)}})}};i.prototype.unmanageElement=function a(t){this._unwatch&&this._unwatch()};i.prototype.reset=function r(){this.resetFlags()};i.prototype._getValue=function o(t){var e=[];for(var i=0,n=t.options.length;i<n;i++){var a=t.options[i];if(!a.disabled&&a.selected){e.push(a.value)}}return e};i.prototype._setOption=function s(t,e){for(var i=0,n=t.length;i<n;i++){var a=t[i];for(var r=0,o=e.options.length;r<o;r++){var s=e.options[r];if(!s.disabled&&s.value===a&&(!s.hasAttribute("selected")||!s.selected)){s.selected=true}}}};i.prototype._checkModified=function l(t){var e=this._getValue(t).slice().sort();if(this._init.length!==e.length){return true}else{var i=this._init.slice().sort();return i.toString()!==e.toString()}};return i}(y);var k=/^v-on:|^@/;var E=function(){function i(e,n,r){var o=this;t.classCallCheck(this,i);this.name=e;this._scope={};this._dir=n;this._validations={};this._checkboxValidations={};this._radioValidations={};this._groups=r;this._groupValidations={};this._events={};this._modified=false;a(r,function(t){o._groupValidations[t]=[]})}i.prototype.enableReactive=function o(){var t=this._dir.vm;e.Vue.util.defineReactive(t,this.name,this._scope);t._validatorMaps[this.name]=this;this._defineResetValidation();this._defineValidate();this._defineSetValidationErrors()};i.prototype.disableReactive=function s(){var t=this._dir.vm;t.$setValidationErrors=undefined;t.$validate=undefined;t.$validatorReset=undefined;t._validatorMaps[this.name]=null;t[this.name]=null};i.prototype.registerEvents=function l(){var t=this._dir.el.attributes;for(var e=0,i=t.length;e<i;e++){var n=t[e].name;if(k.test(n)){n=n.replace(k,"");this._events[this._getEventName(n)]=this._dir.vm.$eval(t[e].value,true)}}};i.prototype.unregisterEvents=function d(){var t=this;a(this._events,function(e,i){t._events[i]=null;delete t._events[i]})};i.prototype.manageValidation=function u(t,e,i,n,a,r,o,s){var l=null;if(n.tagName==="SELECT"){l=this._manageSelectValidation(t,e,i,n,a,r,o,s)}else if(n.type==="checkbox"){l=this._manageCheckboxValidation(t,e,i,n,a,r,o,s)}else if(n.type==="radio"){l=this._manageRadioValidation(t,e,i,n,a,r,o,s)}else{l=this._manageBaseValidation(t,e,i,n,a,r,o,s)}return l};i.prototype.unmanageValidation=function f(t,e){if(e.type==="checkbox"){this._unmanageCheckboxValidation(t,e)}else if(e.type==="radio"){this._unmanageRadioValidation(t,e)}else if(e.tagName==="SELECT"){this._unmanageSelectValidation(t,e)}else{this._unmanageBaseValidation(t,e)}};i.prototype.addGroupValidation=function h(t,i){var n=e.Vue.util.indexOf;var a=this._validations[i]||this._checkboxValidations[i].validation||this._radioValidations[i].validation;var r=this._groupValidations[t];r&&!~n(r,a)&&r.push(a)};i.prototype.removeGroupValidation=function c(t,e){var i=this._validations[e]||this._checkboxValidations[e].validation||this._radioValidations[e].validation;var n=this._groupValidations[t];n&&r(n,i)};i.prototype.validate=function v(){var t=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var e=t.field;var i=e===undefined?null:e;var n=t.touched;var r=n===undefined?false:n;var o=t.noopable;var s=o===undefined?false:o;var l=t.cb;var d=l===undefined?null:l;if(!i){a(this.validations,function(t,e){t.willUpdateFlags(r)});this._validates(d)}else{this._validate(i,r,s,d)}};i.prototype.setupScope=function p(){var t=this;this._defineProperties(function(){return t.validations},function(){return t._scope});a(this._groups,function(i){var n=t._groupValidations[i];var a={};e.Vue.set(t._scope,i,a);t._defineProperties(function(){return n},function(){return a})})};i.prototype.waitFor=function _(t){var e="$activateValidator";var i=this._dir.vm;i[e]=function(){t();i[e]=null}};i.prototype._defineResetValidation=function g(){var t=this;this._dir.vm.$resetValidation=function(e){t._resetValidation(e)}};i.prototype._defineValidate=function m(){var t=this;this._dir.vm.$validate=function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++){i[n]=arguments[n]}var r=null;var o=false;var s=null;a(i,function(t,e){if(typeof t==="string"){r=t}else if(typeof t==="boolean"){o=t}else if(typeof t==="function"){s=t}});t.validate({field:r,touched:o,cb:s})}};i.prototype._defineSetValidationErrors=function E(){var t=this;this._dir.vm.$setValidationErrors=function(e){t._setValidationErrors(e)}};i.prototype._validate=function C(t){var i=arguments.length<=1||arguments[1]===undefined?false:arguments[1];var n=this;var a=arguments.length<=2||arguments[2]===undefined?false:arguments[2];var r=arguments.length<=3||arguments[3]===undefined?null:arguments[3];var o=this._scope;var s=this._getValidationFrom(t);if(s){s.willUpdateFlags(i);s.validate(function(i){e.Vue.set(o,t,i);n._fireEvents();r&&r()},a)}};i.prototype._validates=function x(t){var i=this;var n=this._scope;this._runValidates(function(t,i,a){t.validate(function(t){e.Vue.set(n,i,t);a()})},function(){i._fireEvents();t&&t()})};i.prototype._getValidationFrom=function N(t){var e=this._validations[t];if(!e&&this._checkboxValidations[t]){e=this._checkboxValidations[t].validation}else if(!e&&this._radioValidations[t]){e=this._radioValidations[t].validation}return e};i.prototype._resetValidation=function S(t){a(this.validations,function(t,e){t.reset()});this._validates(t)};i.prototype._setValidationErrors=function A(t){var i=this;var n=e.Vue.util.extend;var r={};a(t,function(t,e){if(!r[t.field]){r[t.field]=[]}r[t.field].push(t)});a(r,function(t,r){var o=i._scope[r];var s={};a(t,function(t){if(t.validator){o[t.validator]=t.message}});o.valid=false;o.invalid=true;o.errors=t;n(s,o);e.Vue.set(i._scope,r,s)})};i.prototype._manageBaseValidation=function O(t,e,i,n,a,r,o,s){var l=this._validations[t]=new y(t,e,i,n,a,this,r,o,s);l.manageElement(n);return l};i.prototype._unmanageBaseValidation=function j(t,i){var n=this._validations[t];if(n){n.unmanageElement(i);e.Vue.delete(this._scope,t);this._validations[t]=null;delete this._validations[t]}};i.prototype._manageCheckboxValidation=function M(t,e,i,n,a,r,o,s){var l=this._checkboxValidations[t];if(!l){var d=new V(t,e,i,n,a,this,r,o,s);l={validation:d,elements:0};this._checkboxValidations[t]=l}l.elements++;l.validation.manageElement(n);return l.validation};i.prototype._unmanageCheckboxValidation=function F(t,i){var n=this._checkboxValidations[t];if(n){n.elements--;n.validation.unmanageElement(i);if(n.elements===0){e.Vue.delete(this._scope,t);this._checkboxValidations[t]=null;delete this._checkboxValidations[t]}}};i.prototype._manageRadioValidation=function $(t,e,i,n,a,r,o,s){var l=this._radioValidations[t];if(!l){var d=new b(t,e,i,n,a,this,r,o,s);l={validation:d,elements:0};this._radioValidations[t]=l}l.elements++;l.validation.manageElement(n);return l.validation};i.prototype._unmanageRadioValidation=function R(t,i){var n=this._radioValidations[t];if(n){n.elements--;n.validation.unmanageElement(i);if(n.elements===0){e.Vue.delete(this._scope,t);this._radioValidations[t]=null;delete this._radioValidations[t]}}};i.prototype._manageSelectValidation=function B(t,e,i,n,a,r,o,s){var l=this._validations[t]=new w(t,e,i,n,a,this,r,o,s);l.manageElement(n);return l};i.prototype._unmanageSelectValidation=function U(t,i){var n=this._validations[t];if(n){n.unmanageElement(i);e.Vue.delete(this._scope,t);this._validations[t]=null;delete this._validations[t]}};i.prototype._fireEvent=function I(t){var e=this._events[this._getEventName(t)];for(var i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++){n[a-1]=arguments[a]}e&&e.apply(null,n)};i.prototype._fireEvents=function P(){var t=this._scope;t.touched&&this._fireEvent("touched");t.dirty&&this._fireEvent("dirty");if(this._modified!==t.modified){this._fireEvent("modified",t.modified);this._modified=t.modified}var e=t.valid;this._fireEvent(e?"valid":"invalid")};i.prototype._getEventName=function D(t){return this.name+":"+t};i.prototype._defineProperties=function T(t,i){var n=this;var r=e.Vue.util.bind;a({valid:{fn:this._defineValid,arg:t},invalid:{fn:this._defineInvalid,arg:i},touched:{fn:this._defineTouched,arg:t},untouched:{fn:this._defineUntouched,arg:i},modified:{fn:this._defineModified,arg:t},dirty:{fn:this._defineDirty,arg:t},pristine:{fn:this._definePristine,arg:i},errors:{fn:this._defineErrors,arg:t}},function(t,e){Object.defineProperty(i(),e,{enumerable:true,configurable:true,get:function a(){return r(t.fn,n)(t.arg)}})})};i.prototype._runValidates=function q(t,e){var i=Object.keys(this.validations).length;var n=0;a(this.validations,function(a,r){t(a,r,function(){++n;n>=i&&e()})})};i.prototype._walkValidations=function G(t,i,n){var r=this;var o=e.Vue.util.hasOwn;var s=n;a(t,function(t,e){if(s===!n){return}if(o(r._scope,t.field)){var a=r._scope[t.field];if(a&&a[i]===!n){s=!n}}});return s};i.prototype._defineValid=function z(t){return this._walkValidations(t(),"valid",true)};i.prototype._defineInvalid=function L(t){return!t().valid};i.prototype._defineTouched=function H(t){return this._walkValidations(t(),"touched",false)};i.prototype._defineUntouched=function W(t){return!t().touched};i.prototype._defineModified=function X(t){return this._walkValidations(t(),"modified",false)};i.prototype._defineDirty=function J(t){return this._walkValidations(t(),"dirty",false)};i.prototype._definePristine=function K(t){return!t().dirty};i.prototype._defineErrors=function Q(t){var i=this;var r=e.Vue.util.hasOwn;var o=e.Vue.util.isPlainObject;var s=[];a(t(),function(t,e){if(r(i._scope,t.field)){var l=i._scope[t.field];if(l&&!n(l.errors)){a(l.errors,function(e,i){var n={field:t.field};if(o(e)){if(e.validator){n.validator=e.validator}n.message=e.message}else if(typeof e==="string"){n.message=e}s.push(n)})}}});return n(s)?undefined:s};t.createClass(i,[{key:"validations",get:function Y(){var t=e.Vue.util.extend;var i={};t(i,this._validations);a(this._checkboxValidations,function(t,e){i[e]=t.validation});a(this._radioValidations,function(t,e){i[e]=t.validation});return i}}]);return i}();function C(t){var e=t.util;var n=t.FragmentFactory;var a=t.directive("if");var r=t.util.camelize;t.elementDirective("validator",{params:["name","groups","lazy"],bind:function o(){var t=this.params;if("development"!=="production"&&!t.name){i("validator element directive need to specify 'name' param attribute: "+'(e.g. <validator name="validator1">...</validator>)');return}this.validatorName="$"+r(t.name);if(!this.vm._validatorMaps){throw new Error("Invalid validator management error")}this.setupValidator();this.setupFragment(t.lazy)},unbind:function s(){this.teardownFragment();this.teardownValidator()},getGroups:function l(){var t=this.params;var i=[];if(t.groups){if(e.isArray(t.groups)){i=t.groups}else if(!e.isPlainObject(t.groups)&&typeof t.groups==="string"){i.push(t.groups)}}return i},setupValidator:function d(){var t=this.validator=new E(this.validatorName,this,this.getGroups());t.enableReactive();t.setupScope();t.registerEvents()},teardownValidator:function u(){this.validator.unregisterEvents();this.validator.disableReactive();if(this.validatorName){this.validatorName=null;this.validator=null}},setupFragment:function f(t){var i=this;var r=this.vm;this.validator.waitFor(function(){i.anchor=e.createAnchor("vue-validator");e.replace(i.el,i.anchor);e.extend(r.$options,{_validator:i.validatorName});i.factory=new n(r,i.el.innerHTML);a.insert.call(i)});!t&&r.$activateValidator()},teardownFragment:function h(){a.unbind.call(this)}})}function x(t){var e={name:"validator-error",props:{field:{type:String,required:true},validator:{type:String},message:{type:String,required:true},partial:{type:String,"default":"validator-error-default"}},template:'<div><partial :name="partial"></partial></div>',partials:{}};e.partials["validator-error-default"]="<p>{{field}}: {{message}}</p>";return e}function N(t){var e=t.util;var i=x(t);var n={name:"validator-errors",props:{validation:{type:Object,required:true},group:{type:String,"default":null},field:{type:String,"default":null},component:{type:String,"default":"validator-error"}},computed:{errors:function a(){var t=this;if(this.group!==null){return this.validation[this.group].errors}else if(this.field!==null){var i=this.validation[this.field];if(!i.errors){return}return i.errors.map(function(i){var n={field:t.field};if(e.isPlainObject(i)){if(i.validator){n.validator=i.validator}n.message=i.message}else if(typeof i==="string"){n.message=i}return n})}else{return this.validation.errors}}},template:'<template v-for="error in errors">'+'<component :is="component" :partial="partial" :field="error.field" :validator="error.validator" :message="error.message">'+"</component>"+"</template>",components:{}};n.props["partial"]=i.props["partial"];n.components[i.name]=i;t.component(n.name,n);return n}function S(t){var n=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(S.installed){i("already installed.");return}e.Vue=t;_(t);N(t);g(t);C(t);m(t)}S.version="2.0.1";if(typeof window!=="undefined"&&window.Vue){window.Vue.use(S)}return S});